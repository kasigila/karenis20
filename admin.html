<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BYZ Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#0A0A14;color:#fff}
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #333}
button{padding:8px 12px;border:none;border-radius:6px;font-weight:bold}
.approve{background:#FFD700}
.checkin{background:#25D366}
</style>
</head>

<body>

<h2>BYZ Admin Dashboard</h2>

<table>
<thead>
<tr>
<th>ID</th><th>Event</th><th>Table</th><th>Name</th>
<th>Status</th><th>Action</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbwiwV7ovrt97eEB7cF0H7zOEZbIpQj3M6RCjyUKGAtC19buMPWgtZLvjW-F_NZ-0_adBg/exec";

function load(){
fetch(SCRIPT_URL).then(r=>r.json()).then(d=>{
rows.innerHTML="";
d.bookings.forEach(b=>{
rows.innerHTML+=`
<tr>
<td>${b.bookingId}</td>
<td>${b.event}</td>
<td>${b.table}</td>
<td>${b.name}</td>
<td>${b.status}</td>
<td>
${b.status==="PENDING"?`<button class="approve" onclick="approve('${b.bookingId}')">Approve</button>`:""}
${b.status==="CONFIRMED"?`<button class="checkin" onclick="checkIn('${b.bookingId}')">Check In</button>`:""}
</td>
</tr>`;
});
});
}

function approve(id){
fetch(SCRIPT_URL,{method:"POST",body:JSON.stringify({action:"approvePayment",bookingId:id})})
.then(()=>load());
}

function checkIn(id){
fetch(SCRIPT_URL,{method:"POST",body:JSON.stringify({action:"checkIn",bookingId:id})})
.then(()=>load());
}

load();
</script>

</body>
</html>
