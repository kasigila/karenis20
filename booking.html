<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BYZ Entertainment | Booking</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

<style>
body{font-family:Arial;background:#0A0A14;color:#fff;margin:0}
.container{max-width:600px;margin:auto;padding:20px}
.card{background:#161622;padding:20px;border-radius:12px;margin-bottom:20px}
button{padding:15px;border:none;border-radius:50px;background:#8A2BE2;color:#fff;font-weight:bold;width:100%}
input,select{width:100%;padding:12px;margin:10px 0;border-radius:8px;border:none}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<h2>BYZ Table Booking</h2>

<div class="card" id="form">
<input id="name" placeholder="Full Name">
<input id="phone" placeholder="WhatsApp Number">
<input id="email" placeholder="Email (optional)">
<input id="guests" type="number" placeholder="Guests">

<select id="event">
<option>Groove</option>
<option>APT</option>
<option>Tempo</option>
</select>

<select id="package">
<option value="">Select Package</option>
<option value="Standard">Standard</option>
<option value="Premium">Premium</option>
<option value="VIP">VIP</option>
</select>

<input id="table" type="number" placeholder="Table Number (1–10)">
<input id="txn" placeholder="M-Pesa Transaction Code">

<button onclick="submit()">Submit Booking</button>
</div>

<div class="card hidden" id="success">
<h3>⏳ Payment Pending Verification</h3>
<p>Your booking will be confirmed once payment is verified.</p>
<p><b>Booking ID:</b> <span id="bid"></span></p>
</div>

</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwiwV7ovrt97eEB7cF0H7zOEZbIpQj3M6RCjyUKGAtC19buMPWgtZLvjW-F_NZ-0_adBg/exec";

function submit(){
  const payload={
    action:"addBooking",
    data:{
      name:name.value,
      phone:phone.value,
      email:email.value,
      guests:guests.value,
      event:event.value,
      package:package.value,
      table:table.value,
      amount:0,
      transactionCode:txn.value
    }
  };

  fetch(SCRIPT_URL,{method:"POST",body:JSON.stringify(payload)})
  .then(r=>r.json())
  .then(res=>{
    if(!res.success){alert(res.message);return;}
    form.classList.add("hidden");
    success.classList.remove("hidden");
    bid.textContent=res.bookingId;
  });
}
</script>

</body>
</html>
